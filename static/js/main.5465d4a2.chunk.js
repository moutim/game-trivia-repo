(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},31:function(e,t,a){e.exports=a.p+"static/media/hourglass.7d6c26b4.png"},34:function(e,t,a){e.exports=a(57)},39:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){},52:function(e,t){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),s=a.n(c),o=(a(39),a(14)),i=a(20),l=(a(45),a(2)),u=a(21),m=a(3),p=a.n(m),d=a(11),f=a(4),h=a(5),b=a(7),v=a(6),y=function(){var e=Object(d.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opentdb.com/api_token.php?command=request");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,localStorage.setItem("token",a.token),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:a=e.sent,t({type:"GET_TOKEN_SUCCESS",payload:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=function(e){return{type:"ADD_USER",payload:e}},O=a(22),k=a.n(O),S=(a(47),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",name:"",isDisable:!0,redirect:!1},e.isValidInfo=function(){var t=e.state,a=t.email,n=t.name;a&&n?e.setState({isDisable:!1}):e.setState({isDisable:!0})},e.handleButtonPlay=Object(d.a)(p.a.mark((function t(){var a,n,r,c,s,o,i,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.name,r=a.email,c=e.props,s=c.sendToken,o=c.sendUser,i=c.sendPlayer,l=c.cleaningScore,t.next=4,s();case 4:o({name:n,email:r}),i({name:n,email:r}),e.setState({redirect:!0}),l(0);case 8:case"end":return t.stop()}}),t)}))),e.handleInputChange=function(t){var a=t.target,n=a.value,r=a.id;e.setState(Object(u.a)({},r,n),e.isValidInfo)},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.redirectToSettings,a=e.history,n=this.state,c=n.name,s=n.email,o=n.isDisable,i=n.redirect;return r.a.createElement("main",{className:"mainLogin"},i&&r.a.createElement(l.a,{to:"/screenGame"}),r.a.createElement("img",{src:k.a,alt:"Titulo Trivia",className:"triviaImg"}),r.a.createElement("div",{className:"containerInputs"},r.a.createElement("h2",null,"Login"),r.a.createElement("div",{className:"userInputs"},r.a.createElement("label",{htmlFor:"name"},r.a.createElement("i",{className:"fa-solid fa-user"}),r.a.createElement("input",{value:c,"data-testid":"input-player-name",type:"text",name:"name",id:"name",placeholder:"Name",onChange:this.handleInputChange})),r.a.createElement("label",{htmlFor:"email"},r.a.createElement("i",{className:"fa-solid fa-envelope"}),r.a.createElement("input",{value:s,"data-testid":"input-gravatar-email",type:"text",name:"email",id:"email",placeholder:"Email",onChange:this.handleInputChange})),r.a.createElement("div",{className:"userButtons"},r.a.createElement("button",{"data-testid":"btn-play",disabled:o,type:"button",onClick:this.handleButtonPlay},"Play"),r.a.createElement("button",{"data-testid":"btn-settings",onClick:function(){t(c),a.push("/settings")},type:"button"},"Settings")))))}}]),a}(n.Component)),w=Object(o.b)(null,(function(e){return{sendToken:function(){return e(g())},sendUser:function(t){return e(E(t))},sendPlayer:function(t){return e({type:"ADD_USER",payload:t})},redirectToSettings:function(t){return e(E(t))},cleaningScore:function(t){return e({type:"CLEAR_SCORE",payload:t})}}}))(S),j=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("h1",{"data-testid":"settings-title"},"Settings")}}]),a}(n.Component),N=a(15),C=a(29),A=a(30),x=a.n(A),D=(a(53),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",linkImage:""},e.fetchInfoGravatar=Object(d.a)(p.a.mark((function t(){var a,n,r,c,s,o,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props,n=a.reducerLogin,r=n.email,c=n.name,s=a.sendPictureGravatar,o=x()(r).toString(),i="https://www.gravatar.com/avatar/".concat(o),s(i),e.setState({linkImage:i,name:c});case 5:case"end":return t.stop()}}),t)}))),e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.fetchInfoGravatar()}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.linkImage,n=this.props.player.score;return r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("img",{"data-testid":"header-profile-picture",src:a,alt:"User avatar Gravatar"}),r.a.createElement("p",{"data-testid":"header-player-name"},"Player:",r.a.createElement("span",{className:"highlightedText"},t))),r.a.createElement("img",{className:"logoTrivia",src:k.a,alt:"Logo Trivia"}),r.a.createElement("p",{className:"score-points"},"Score:"," ",r.a.createElement("span",{className:"highlightedText","data-testid":"header-score"},n)))}}]),a}(n.Component)),I=Object(o.b)((function(e){return e}),(function(e){return{sendPictureGravatar:function(t){return e({type:"SEND_PICTURE_GRAVATAR",payload:t})}}}))(D),_=function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opentdb.com/api.php?amount=5&token=".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:if(a=e.sent,3,3!==a.response_code){e.next=10;break}return e.next=7,y();case 7:return n=localStorage.getItem("token"),r=_(n),e.abrupt("return",r);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=(a(54),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).formulaScore=function(e,t){return"easy"===e?10+1*t:"medium"===e?10+2*t:"hard"===e?10+3*t:void 0},e.handleSelectAnswer=function(t){var a=t.target.id,n=e.props,r=n.correctAnswer,c=n.difficulty,s=n.timer,o=n.sendScore,i=n.sendAssertions,l=n.answerWasClicked;r===a&&(o(e.formulaScore(c,s)),i());var u=e.props,m=[{name:u.name,score:u.scorePoints,picture:u.picture}];localStorage.setItem("ranking",JSON.stringify(m)),l()},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.shuffleQuestions,n=t.correctAnswer,c=t.isDisabledButton,s=t.wasClicked;return r.a.createElement(r.a.Fragment,null,a.map((function(t,a){return t===n?r.a.createElement("button",{key:t,"data-testid":"correct-answer",type:"button",className:s?"correctAnswer":"alternativeButton",onClick:e.handleSelectAnswer,id:t,disabled:c},t):r.a.createElement("button",{key:t,"data-testid":"wrong-answer-".concat(a),type:"button",className:s?"wrongAnswer":"alternativeButton",onClick:e.handleSelectAnswer,id:t,disabled:c},t)})))}}]),a}(n.Component));B.defaultProps={correctAnswer:""};var R=Object(o.b)(null,(function(e){return{sendScore:function(t){return e({type:"SEND_SCORE",payload:t})},sendAssertions:function(){return e({type:"SEND_ASSERTIONS"})}}}))(B),Q=(a(55),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.questionNumber,a=e.category,n=e.difficulty;return r.a.createElement("div",{className:"question-info"},r.a.createElement("h1",null,"Question number ".concat(t+1)),r.a.createElement("h2",{"data-testid":"question-category"},"Category: ".concat(a)),r.a.createElement("h4",null,"Difficulty: ".concat(n)))}}]),a}(n.Component)),P=a(31),q=a.n(P),G=(a(56),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.timer;return r.a.createElement("div",{className:"box-timer"},r.a.createElement("img",{className:"rotate",src:q.a,alt:"desenho de uma ampulhera"}),r.a.createElement("p",null,e))}}]),a}(n.Component)),U=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={questionNumber:0,questions:[],currentQuestion:{},isShow:!1,wasClicked:!1,isDisabledButton:!1,timer:30,shuffleQuestions:[]},e.countdown=function(){var t=e.state,a=t.isDisabledButton,n=t.timer,r=setInterval((function(){!1===a&&n>0&&e.setState((function(e){return{timer:e.timer-1,isDisabledButton:!1}}))}),1e3);setTimeout((function(){0===n&&(e.setState({isDisabledButton:!0}),clearInterval(r))}),3e4)},e.fetchQuestions=Object(d.a)(p.a.mark((function t(){var a,n,r,c,s,o,i,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("token"),t.next=3,T(a);case 3:n=t.sent,r=n.results,e.setState({currentQuestion:r[0],questions:r}),c=e.state.currentQuestion,s=c.correct_answer,o=c.incorrect_answers,[],i=[s].concat(Object(N.a)(o)),l=e.shuffleQuestions(i),e.setState({shuffleQuestions:l});case 11:case"end":return t.stop()}}),t)}))),e.handleButtonNextShow=function(){e.setState({isShow:!0})},e.answerWasClicked=function(){e.setState({wasClicked:!0,isShow:!0})},e.handleButtonNextQuestion=function(){var t=e.state,a=t.questions,n=t.questionNumber,r=e.props.history;if(4===n)return r.push("/feedback");var c=n+1,s=a[c],o=s.correct_answer,i=s.incorrect_answers,l=[o].concat(Object(N.a)(i)),u=e.shuffleQuestions(l);e.setState({shuffleQuestions:u,currentQuestion:a[c],wasClicked:!1,isShow:!1,questionNumber:c,timer:30})},e.shuffleQuestions=function(e){return Object(C.a)(e)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.fetchQuestions(),this.countdown()}},{key:"render",value:function(){var e=this.state,t=e.currentQuestion,a=t.category,n=t.question,c=t.correct_answer,s=t.difficulty,o=e.isShow,i=e.wasClicked,l=e.shuffleQuestions,u=e.isDisabledButton,m=e.timer,p=e.questionNumber;return console.log(m),r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null),r.a.createElement("main",null,r.a.createElement("section",{className:"card"},r.a.createElement("div",{className:"container-info"},r.a.createElement(Q,{questionNumber:p,category:a,difficulty:s})),r.a.createElement("h3",{dangerouslySetInnerHTML:{__html:n},"data-testid":"question-text"}),r.a.createElement("div",{className:"alternative-box","data-testid":"answer-options"},r.a.createElement(R,{wasClicked:i,answerWasClicked:this.answerWasClicked,shuffleQuestions:l,correctAnswer:c,timer:m,difficulty:s,isDisabledButton:u})),r.a.createElement("div",{className:"container-timer"},r.a.createElement(G,{timer:m}),!(!o&&0!==m)&&r.a.createElement("button",{type:"button",onClick:this.handleButtonNextQuestion,className:"buttonNext","data-testid":"btn-next"},r.a.createElement("i",{className:"arrow fa-solid fa-right-long"}))))))}}]),a}(n.Component),L=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={feedBackMessage:""},e.handleButtonPlayAgain=function(){e.props.history.push("/")},e.handleLocalStorage=function(){var t=e.props,a=t.name,n=t.score,r=t.picture;if(null===localStorage.getItem("ranking"))localStorage.setItem("ranking",JSON.stringify([{name:a,score:n,picture:r}]));else{var c=[].concat(Object(N.a)(JSON.parse(localStorage.getItem("ranking"))),[{name:a,score:n,picture:r}]);c.sort((function(e,t){return t.score-e.score})),localStorage.setItem("ranking",JSON.stringify(c))}},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e,t=this.props.assertions;t<3&&(e="Could be better..."),t>=3&&(e="Well Done!"),this.setState({feedBackMessage:e}),this.handleLocalStorage()}},{key:"render",value:function(){var e=this.state.feedBackMessage,t=this.props,a=t.assertions,n=t.score,c=t.history;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null),r.a.createElement("main",null,r.a.createElement("h2",null,"Feedback about your Trivia match"),r.a.createElement("h3",null,"In this match you scored ",r.a.createElement("span",{"data-testid":"feedback-total-score"},n)," points!"),r.a.createElement("h3",null,"You got ",r.a.createElement("span",{"data-testid":"feedback-total-question"},a)," quetions right, ",r.a.createElement("span",{"data-testid":"feedback-text"},e)),r.a.createElement("button",{type:"button","data-testid":"btn-play-again",onClick:this.handleButtonPlayAgain},"Play Again"),r.a.createElement("button",{type:"button","data-testid":"btn-ranking",onClick:function(){c.push("/ranking")}},"Ranking")))}}]),a}(n.Component),M=Object(o.b)((function(e){return{score:e.player.score,assertions:e.player.assertions,name:e.player.name,picture:e.player.pictureGravatar}}))(L),W=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleButtonPlayAgain=function(){e.props.history.push("/")},e}return Object(h.a)(a,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("ranking"));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),e.map((function(e,t){return r.a.createElement("ul",{key:t},r.a.createElement("img",{src:e.picture,alt:"User from Gravatar"}),r.a.createElement("p",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("span",{"data-testid":"player-score-".concat(t)},e.score))})),r.a.createElement("button",{type:"button","data-testid":"btn-go-home",onClick:this.handleButtonPlayAgain},"Voltar \xe0 Tela inicial"))}}]),a}(n.Component),F=Object(o.b)((function(e){return{name:e.player.name,score:e.player.score,picture:e.player.pictureGravatar}}))(W);function J(){return r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:w}),r.a.createElement(l.b,{path:"/settings",component:j}),r.a.createElement(l.b,{path:"/screenGame",component:U}),r.a.createElement(l.b,{path:"/feedback",component:M}),r.a.createElement(l.b,{path:"/ranking",component:F}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=a(17),K=a(33),H=a(32),Y=a(9),$={email:"",name:""},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object(Y.a)(Object(Y.a)({},e),{},{email:t.payload.email,name:t.payload.name});default:return e}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOKEN_SUCCESS":return t.payload.token;default:return e}},Z={name:"",assertions:0,score:0,gravatarEmail:"",pictureGravatar:""},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object(Y.a)(Object(Y.a)({},e),{},{name:t.payload.name,gravatarEmail:t.payload.email});case"SEND_PICTURE_GRAVATAR":return Object(Y.a)(Object(Y.a)({},e),{},{pictureGravatar:t.payload});case"SEND_SCORE":return Object(Y.a)(Object(Y.a)({},e),{},{score:e.score+t.payload});case"SEND_ASSERTIONS":return Object(Y.a)(Object(Y.a)({},e),{},{assertions:e.assertions+1});case"CLEAR_SCORE":return Object(Y.a)(Object(Y.a)({},e),{},{score:t.payload});default:return e}},te=Object(V.combineReducers)({reducerLogin:z,token:X,player:ee}),ae=Object(V.createStore)(te,Object(H.composeWithDevTools)(Object(V.applyMiddleware)(K.a)));window.Cypress&&(window.store=ae);var ne=ae;s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:ne},r.a.createElement(i.a,null,r.a.createElement(J,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.5465d4a2.chunk.js.map